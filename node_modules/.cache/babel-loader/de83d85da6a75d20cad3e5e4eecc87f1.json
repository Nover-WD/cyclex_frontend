{"ast":null,"code":"import _slicedToArray from\"C:/Github Repositories/cyclex/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{makeStyles}from\"@mui/styles\";import{Avatar,Stack,Paper,Typography,Button,Dialog,DialogContent,TextField,DialogActions}from\"@mui/material\";//components\nimport Form from\"../Form\";import Message from\"../Message\";import TopBanner from\"../TopBanner\";import Footer from\"../Footer\";import PrimaryMenu from\"../PrimaryMenu\";//redux\nimport{useSelector,useDispatch}from\"react-redux\";import{getUserProfile,updateUserProfile,deleteUserProfile,logout}from\"../../actions/userActions\";import{UPDATE_PROFILE_RESET}from\"../../constants/userConstants\";//react-router-dom\nimport{useNavigate}from\"react-router-dom\";import{Box}from\"@mui/system\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{avatar:{backgroundColor:theme.palette.primary.main,width:\"56px\",height:\"56px\"},dialog:{padding:\"50px\"}};});var Profile=function Profile(){var classes=useStyles();var history=useNavigate();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isUpdateOpen=_useState2[0],setIsUpdateOpen=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isDeleteOpen=_useState4[0],setIsDeleteOpen=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),name=_useState6[0],setName=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),email=_useState8[0],setEmail=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),password=_useState10[0],setPassword=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),confirmPassword=_useState12[0],setConfirmPassword=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),message=_useState14[0],setMessage=_useState14[1];var dispatch=useDispatch();var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var userProfile=useSelector(function(state){return state.userProfile;});var isLoading=userProfile.isLoading,error=userProfile.error,user=userProfile.user;var updateProfile=useSelector(function(state){return state.updateProfile;});var success=updateProfile.success;var handleUpdateDialog=function handleUpdateDialog(){setIsUpdateOpen(true);};var handleUpdateDialogClose=function handleUpdateDialogClose(){setIsUpdateOpen(false);};var handleUpdate=function handleUpdate(event){event.preventDefault();if(password!==confirmPassword){setMessage(\"Password do not match\");}else{dispatch(updateUserProfile({id:user.id,name:name,email:email,password:password}));}};var handleDeleteDialog=function handleDeleteDialog(){setIsDeleteOpen(true);};var handleDeleteDialogClose=function handleDeleteDialogClose(){setIsDeleteOpen(false);};var handleDelete=function handleDelete(){dispatch(deleteUserProfile());dispatch(logout());history(\"/signin\");};useEffect(function(){if(!userInfo){history(\"/signin\");}else{if(!user||success){dispatch({type:UPDATE_PROFILE_RESET});dispatch(getUserProfile(\"profile\"));setIsUpdateOpen(false);}else{setName(user.name);setEmail(user.email);}}},[userInfo,history,dispatch,user,success]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TopBanner,{}),/*#__PURE__*/_jsx(PrimaryMenu,{}),/*#__PURE__*/_jsx(Box,{sx:{padding:\"60px\",'@media (max-width: 600px)':{padding:'30px 30px'}},children:/*#__PURE__*/_jsx(Paper,{elevation:4,sx:{width:\"480px\",padding:\"40px 30px\",backgroundColor:\"primary.light\",margin:\"auto\",'@media (max-width: 600px)':{width:'100%'}},children:/*#__PURE__*/_jsxs(Stack,{spacing:1,alignItems:\"center\",children:[/*#__PURE__*/_jsx(Avatar,{className:classes.avatar,children:/*#__PURE__*/_jsx(Typography,{variant:\"h3\",children:userInfo?userInfo.name[0]:null})}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:userInfo?userInfo.name:null}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",children:userInfo?userInfo.email:null}),/*#__PURE__*/_jsxs(Stack,{direction:{xs:\"column\",sm:\"row\"},spacing:{xs:1,sm:2},children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",type:\"submit\",onClick:handleUpdateDialog,children:\"EDIT PROFILE\"}),/*#__PURE__*/_jsxs(Dialog,{open:isUpdateOpen,onClose:handleUpdateDialogClose,children:[/*#__PURE__*/_jsx(Form,{isLoading:isLoading,error:error,children:message?/*#__PURE__*/_jsx(Message,{severity:\"error\",form:true,children:message}):null}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",textAlign:\"center\",sx:{paddingTop:\"20px\"},children:\"UPDATE PROFILE\"}),/*#__PURE__*/_jsxs(Box,{component:\"form\",noValidate:true,autoComplete:\"off\",onSubmit:function onSubmit(event){return handleUpdate(event);},children:[/*#__PURE__*/_jsx(DialogContent,{sx:{padding:\"20px 40px!important\"},children:/*#__PURE__*/_jsxs(Stack,{spacing:2,children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"NAME\",type:\"text\",value:name,variant:\"outlined\",onChange:function onChange(event){return setName(event.target.value);}}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"EMAIL\",type:\"email\",value:email,variant:\"outlined\",onChange:function onChange(event){return setEmail(event.target.value);}}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"PASSWORD\",variant:\"outlined\",type:\"password\",onChange:function onChange(event){return setPassword(event.target.value);}}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"CONFIRM PASSWORD\",variant:\"outlined\",type:\"password\",onChange:function onChange(event){return setConfirmPassword(event.target.value);}})]})}),/*#__PURE__*/_jsx(DialogActions,{sx:{paddingBottom:\"30px\",justifyContent:\"center\"},children:/*#__PURE__*/_jsxs(Stack,{direction:{xs:\"column\",sm:\"row\"},spacing:{xs:2,sm:2},justifyContent:\"center\",children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",type:\"submit\",children:\"UPDATE\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"secondary\",onClick:handleUpdateDialogClose,children:\"CLOSE\"})]})})]})]}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"error\",onClick:handleDeleteDialog,children:\"DELETE ACCOUNT\"}),/*#__PURE__*/_jsxs(Dialog,{open:isDeleteOpen,onClose:handleDeleteDialogClose,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",textAlign:\"center\",sx:{paddingTop:\"20px\"},children:\"DELETE PROFILE\"}),/*#__PURE__*/_jsxs(DialogContent,{children:[/*#__PURE__*/_jsx(Typography,{sx:{marginBottom:\"20px\"},children:\"Are you sure you want to delete your profile/account?\"}),/*#__PURE__*/_jsxs(Stack,{direction:{xs:\"column\",sm:\"row\"},spacing:{xs:2,sm:2},justifyContent:\"center\",children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"error\",onClick:handleDelete,children:\"Yes\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:handleDeleteDialogClose,children:\"No\"})]})]})]})]})]})})}),/*#__PURE__*/_jsx(Footer,{})]});};export default Profile;","map":{"version":3,"sources":["C:/Github Repositories/cyclex/frontend/src/components/pages/Profile.js"],"names":["React","useEffect","useState","makeStyles","Avatar","Stack","Paper","Typography","Button","Dialog","DialogContent","TextField","DialogActions","Form","Message","TopBanner","Footer","PrimaryMenu","useSelector","useDispatch","getUserProfile","updateUserProfile","deleteUserProfile","logout","UPDATE_PROFILE_RESET","useNavigate","Box","useStyles","theme","avatar","backgroundColor","palette","primary","main","width","height","dialog","padding","Profile","classes","history","isUpdateOpen","setIsUpdateOpen","isDeleteOpen","setIsDeleteOpen","name","setName","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","message","setMessage","dispatch","userLogin","state","userInfo","userProfile","isLoading","error","user","updateProfile","success","handleUpdateDialog","handleUpdateDialogClose","handleUpdate","event","preventDefault","id","handleDeleteDialog","handleDeleteDialogClose","handleDelete","type","margin","xs","sm","paddingTop","target","value","paddingBottom","justifyContent","marginBottom"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@mui/styles\";\r\nimport { Avatar, Stack, Paper, Typography, Button, Dialog, DialogContent, TextField, DialogActions } from \"@mui/material\";\r\n\r\n//components\r\nimport Form from \"../Form\";\r\nimport Message from \"../Message\";\r\nimport TopBanner from \"../TopBanner\";\r\nimport Footer from \"../Footer\";\r\nimport PrimaryMenu from \"../PrimaryMenu\";\r\n\r\n//redux\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { getUserProfile, updateUserProfile, deleteUserProfile, logout } from \"../../actions/userActions\";\r\nimport { UPDATE_PROFILE_RESET } from \"../../constants/userConstants\";\r\n\r\n//react-router-dom\r\nimport {  useNavigate } from \"react-router-dom\";\r\nimport { Box } from \"@mui/system\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    avatar: {\r\n        backgroundColor: theme.palette.primary.main,\r\n        width: \"56px\",\r\n        height: \"56px\"\r\n    },\r\n    dialog: {\r\n        padding: \"50px\"\r\n    }\r\n}));\r\n\r\nconst Profile = () => {\r\n    const classes = useStyles();\r\n    const history = useNavigate();\r\n    \r\n    const [isUpdateOpen, setIsUpdateOpen] = useState(false);\r\n    const [isDeleteOpen, setIsDeleteOpen] = useState(false);\r\n    const [name, setName] = useState(null);\r\n    const [email, setEmail] = useState(null);\r\n    const [password, setPassword] = useState(null);\r\n    const [confirmPassword, setConfirmPassword] = useState(null);\r\n    const [message, setMessage] = useState(null);\r\n\r\n\r\n    const dispatch = useDispatch();\r\n    const userLogin = useSelector((state) => state.userLogin);\r\n    const { userInfo } = userLogin;\r\n\r\n    const userProfile = useSelector((state) => state.userProfile);\r\n    const {isLoading, error, user} = userProfile;\r\n\r\n    const updateProfile = useSelector((state) => state.updateProfile);\r\n    const { success } = updateProfile;\r\n\r\n    const handleUpdateDialog = () => {\r\n        setIsUpdateOpen(true);\r\n    };\r\n\r\n    const handleUpdateDialogClose = () => {\r\n        setIsUpdateOpen(false);\r\n    }\r\n\r\n    const handleUpdate = (event) => {\r\n        event.preventDefault();\r\n\r\n        if(password !== confirmPassword){\r\n            setMessage(\"Password do not match\");\r\n        } \r\n        else {\r\n            dispatch(updateUserProfile({id: user.id, name: name, email: email, password: password}));\r\n        }\r\n    };\r\n\r\n    const handleDeleteDialog = () => {\r\n        setIsDeleteOpen(true);\r\n    }\r\n\r\n    const handleDeleteDialogClose = () => {\r\n        setIsDeleteOpen(false);\r\n    }\r\n\r\n    const handleDelete = () => {\r\n        dispatch(deleteUserProfile());\r\n        dispatch(logout());\r\n        history(\"/signin\");\r\n    };\r\n\r\n    useEffect(() => {\r\n        if(!userInfo) {\r\n            history(\"/signin\")\r\n        } else {\r\n            if( !user || success){\r\n                dispatch({\r\n                    type: UPDATE_PROFILE_RESET\r\n                });\r\n\r\n                dispatch(getUserProfile(\"profile\"));\r\n                setIsUpdateOpen(false);\r\n            } else {\r\n                setName(user.name);\r\n                setEmail(user.email);\r\n            }\r\n        }\r\n    }, [userInfo, history, dispatch, user, success]);\r\n\r\n    return (\r\n        <>\r\n            <TopBanner/>\r\n            <PrimaryMenu/>\r\n            <Box sx={{padding: \"60px\", '@media (max-width: 600px)' : {padding: '30px 30px'}}}>\r\n                <Paper\r\n                    elevation={4} sx={{width: \"480px\", padding: \"40px 30px\", backgroundColor: \"primary.light\",\r\n                    margin: \"auto\",\r\n                    '@media (max-width: 600px)': {\r\n                        width: '100%'\r\n                    }\r\n                    }}\r\n                >\r\n                    <Stack spacing={1} alignItems=\"center\">\r\n                        <Avatar className={classes.avatar}>\r\n                            <Typography variant=\"h3\">\r\n                                { userInfo ? userInfo.name[0] : null }\r\n                            </Typography>\r\n                        </Avatar>\r\n                        <Typography variant=\"h4\">\r\n                            { userInfo ? userInfo.name : null }\r\n                        </Typography>\r\n                        <Typography variant=\"h5\">\r\n                            { userInfo ? userInfo.email : null }\r\n                        </Typography>\r\n                        <Stack direction={{xs: \"column\", sm: \"row\"}} spacing={{xs: 1, sm: 2}}>\r\n                            <Button variant=\"contained\" type=\"submit\" onClick={handleUpdateDialog}>\r\n                                EDIT PROFILE\r\n                            </Button>\r\n                            <Dialog open={isUpdateOpen} onClose={handleUpdateDialogClose}>\r\n                                <Form isLoading={isLoading} error={error}>\r\n                                    { message ? <Message severity=\"error\" form={true}>{message}</Message> : null}\r\n                                </Form>\r\n                                <Typography variant=\"h4\" textAlign=\"center\" sx={{paddingTop: \"20px\"}}>\r\n                                    UPDATE PROFILE\r\n                                </Typography>\r\n                                <Box component=\"form\" noValidate autoComplete=\"off\" onSubmit={(event) => handleUpdate(event)}>\r\n                                    <DialogContent sx={{padding: \"20px 40px!important\"}}>\r\n                                        <Stack spacing={2}>\r\n                                                <TextField fullWidth label=\"NAME\" type=\"text\" value={name} variant=\"outlined\" onChange={(event) => setName(event.target.value)}>\r\n                                                </TextField>\r\n                                                <TextField fullWidth label=\"EMAIL\" type=\"email\" value={email} variant=\"outlined\" onChange={(event) => setEmail(event.target.value)}>\r\n                                                </TextField>\r\n                                                <TextField fullWidth label=\"PASSWORD\" variant=\"outlined\" type=\"password\" onChange={(event) => setPassword(event.target.value)}>\r\n                                                </TextField>\r\n                                                <TextField fullWidth label=\"CONFIRM PASSWORD\" variant=\"outlined\" type=\"password\" onChange={(event) => setConfirmPassword(event.target.value)}>\r\n                                                </TextField>\r\n                                        </Stack>\r\n                                    </DialogContent>\r\n                                    <DialogActions sx={{paddingBottom: \"30px\", justifyContent: \"center\"}}>\r\n                                        <Stack direction={{xs: \"column\", sm: \"row\"}}  spacing={{xs: 2, sm: 2}} justifyContent=\"center\">\r\n                                            <Button variant=\"contained\" color=\"primary\" type=\"submit\">\r\n                                                UPDATE\r\n                                            </Button>\r\n                                            <Button variant=\"contained\" color=\"secondary\" onClick={handleUpdateDialogClose}>\r\n                                                CLOSE\r\n                                            </Button>\r\n                                        </Stack>\r\n                                    </DialogActions>\r\n                                </Box>\r\n                            </Dialog>\r\n                            <Button variant=\"contained\" color=\"error\" onClick={handleDeleteDialog}>\r\n                                DELETE ACCOUNT\r\n                            </Button>\r\n                            <Dialog open={isDeleteOpen} onClose={handleDeleteDialogClose}>\r\n                                <Typography variant=\"h4\" textAlign=\"center\" sx={{paddingTop: \"20px\"}}>\r\n                                        DELETE PROFILE\r\n                                </Typography>\r\n                                <DialogContent>\r\n                                    <Typography sx={{marginBottom: \"20px\"}}>Are you sure you want to delete your profile/account?</Typography>\r\n                                    <Stack direction={{xs: \"column\", sm: \"row\"}}  spacing={{xs: 2, sm: 2}} justifyContent=\"center\">\r\n                                        <Button variant=\"contained\" color=\"error\" onClick={handleDelete}>\r\n                                            Yes\r\n                                        </Button>\r\n                                        <Button variant=\"contained\" color=\"primary\" onClick={handleDeleteDialogClose}>\r\n                                            No\r\n                                        </Button>\r\n                                    </Stack>\r\n                                </DialogContent>\r\n                            </Dialog>\r\n                        </Stack>\r\n                    </Stack>\r\n                </Paper>\r\n            </Box>\r\n            <Footer/>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Profile;"]},"metadata":{},"sourceType":"module"}